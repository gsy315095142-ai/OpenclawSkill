# 2026-02-13 工作记录

## 项目：魔法冰球竞猜系统

### 1. 数值设计工作

**积分规则（v4版本）**
- 同段位：赢 +50分，输 -5分
- 100%胜率：10场升一段
- 50%胜率：22场升一段
- 弱者打强者（高4段以上）：输了不扣分
- 强者打弱者：赢了少得分，输了多扣分

**赔率矩阵（完美双向等差）**
- 横向公差：+0.20
- 纵向公差：-0.05
- 最高赔率：新手vs王者 = 2.70
- 最低赔率：王者vs新手 = 1.20
- 对角线（同段位）：1.50 → 2.40（公差+0.15）

### 2. 页面更新

**段位积分页面（TierSystem.jsx）**
- 数值设计目标移到最前面
- 使用卡片式布局展示3个核心目标
- 同步更新所有硬编码数值

**赔率对照页面（OddsTable.jsx）**
- 更新赔率矩阵为等差数列版本
- 添加数值设计目标说明
- 同步更新所有说明文字

**趣味竞猜页面（QuizModes.jsx）**
- 改为卡片式并排布局（3种玩法）
- 每种玩法独立卡片，有明显颜色区分
- 添加难度标签（简单/高难度）

**打赏系统页面（RewardSystem.jsx）**
- 3个打赏方式改为卡片式并排布局
- 点赞弹幕/功能物品/模型皮肤分别用不同颜色边框

**竞猜币页面（Currency.jsx）**
- 周边奖励改为图片卡片展示
- 不显示所需竞猜币（数值待定）
- 使用emoji作为图片占位

**流程图页面（FlowChart.jsx）**
- 删除"循环生态机制"部分
- 删除"关键数据一览"部分
- 只保留流程图核心内容

**功能物品**
- 删除"全场聚光灯"（500币）

### 3. Skill 更新

**web-development/SKILL.md**
- 新增 3.1.1 服务器状态验证规则
- 教训：启动服务器后必须用 `process log` 验证日志确认成功
- 禁止仅执行启动命令就告诉用户"服务器已启动"

### 4. 文档

**联动规则备忘.md**
- 记录积分和赔率的联动规则
- 当数值调整时需同步更新的内容

**数值预期说明.md**
- 完整的v4版本数值设计文档
- 包含设计约束、积分规则、赔率矩阵、等差验证

### 5. 设计约束（已确认）

| 约束 | 内容 |
|-----|------|
| A | 积分失败扣分尾数必须是 5 或 0 |
| B | 赔率数值尾数必须是 5 或 0 |
| C | 赔率矩阵横向和纵向必须是等差数列 |
| D | 赔率范围：最低 1.20，最高 2.70 |

### 6. 流程图页面优化（FlowChart.jsx）

**布局改进**
- 从"左侧节点+右侧卡片"改为"横向时间轴+底部卡片"
- 5个步骤横向排列，用箭头连接
- 点击任意步骤查看详情
- 底部添加导航按钮（上一步/下一步）和进度点

**交互优化**
- 选中节点有放大效果
- 卡片切换有淡入动画
- 顶部有彩色条标识当前步骤颜色

---

## 下次继续

- 周边奖励的竞猜币价格待定
- 可能需要进一步调整数值
