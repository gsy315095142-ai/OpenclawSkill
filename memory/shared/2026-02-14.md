# 2026-02-14 Memory Log

## 多机协作配置

### 远程 OpenClaw 节点配置
- **另一台电脑（AI电脑）**：192.168.1.52:18789
- **Token**: [已移至 secrets.json]
- **关键经验**：Gateway bind 必须设置为 `"lan"`（不是 "all" 或 "0.0.0.0"）
- **配置文件位置**: `~\.openclaw\openclaw.json`

### 创建的 Skill
- `skills/multi-gateway/SKILL.md` - 多台电脑 OpenClaw 协作指南
- 包含 Gateway bind 正确值、Node 配对说明、Tailscale 方案

### 更新的文件
- `TOOLS.md` - 新增远程节点信息表格

### 待解决问题
- 通过 cron 工具远程调用时报 token 验证失败
- 可能需要确认远程 Gateway 的实际 auth token 配置
- **新发现**：远程调用还报过 "pairing required" 错误，说明需要配对

### 配对流程探索（进行中）
1. `openclaw pairing` - 查看配对命令帮助
2. `openclaw pairing list` - 列出待处理配对请求
3. `openclaw pairing approve` - 批准配对请求
4. 流程：主控端发起请求 → 被控端运行 `pairing approve` 批准

### 错误信息记录
- `gateway closed (1008): pairing required` - 需要配对
- `gateway closed (1008): unauthorized: gateway token mismatch` - token 不匹配

## 清理任务
- 删除了 5 个旧的 cron 提醒任务（喝水提醒、AI机房登记等）

## Memory 目录重构

**原因**：私聊和群聊的聊天记录文件冲突导致 400 API 错误

**解决方案**：
1. 按会话类型和 chat_id 隔离存储目录
2. 现有工作日志移至 `shared/` 目录
3. 创建 `memory/README.md` 说明目录结构

**新结构**：
```
memory/
├── dm/{chat_id}/        # 私聊记录
├── group/{chat_id}/     # 群聊记录
├── shared/              # 共享记忆
└── README.md
```

**备份位置**：`memory_backup_20260214_163032/`

## 群聊身份验证事件

**事件**：群友提出设置转账提醒，机器人误将群友的"同意"当作郭郭的授权

**教训**：
- 敏感操作必须核对发言人 open_id
- 涉及金钱的操作，宁可多确认，不可贸然执行
- 只接受来自郭郭 (ou_781f6c62831244e645c560ab7c9b6d36) 的授权

**创建的 Skill**：`skills/group-chat-etiquette/SKILL.md`
- 群聊行为准则
- 敏感操作验证流程
- 案例记录

## Anthropic API Key 缺失错误

**时间**：2026-02-14 23:07

**错误信息**：
```
No API key found for provider "anthropic"
```

**涉及 lane**：
- `lane=main`
- `lane=session:temp:slug-generator`

**原因分析**：
- 当前主模型是 `zai/glm-5`，本身没问题
- 但某些临时 session 或子任务可能使用了默认的模型配置，指向了 `anthropic` provider
- 需要在 `C:\Users\31509\.openclaw\agents\main\agent\auth-profiles.json` 配置 anthropic 的 API key

**待确认**：是否需要配置 anthropic key，还是应该修改默认模型配置
