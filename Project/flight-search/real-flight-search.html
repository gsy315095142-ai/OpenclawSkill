<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¦é—¨é£åŒ—äº¬å•†åŠ¡èˆ±æœºç¥¨æœç´¢ - å®æ—¶æ•°æ®</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', 'Microsoft YaHei', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .search-status {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
            padding: 15px;
            margin: 20px;
            border-radius: 10px;
            text-align: center;
        }
        
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #3498db;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 10px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .real-search-info {
            background: #e8f5e8;
            border: 1px solid #4caf50;
            color: #2e7d32;
            padding: 15px;
            margin: 20px;
            border-radius: 10px;
        }
        
        .api-sources {
            background: #f3e5f5;
            border: 1px solid #9c27b0;
            color: #6a1b9a;
            padding: 15px;
            margin: 20px;
            border-radius: 10px;
        }
        
        .manual-entry {
            background: #e3f2fd;
            border: 1px solid #2196f3;
            color: #1565c0;
            padding: 20px;
            margin: 20px;
            border-radius: 10px;
        }
        
        .input-group {
            margin: 10px 0;
        }
        
        .input-group label {
            display: inline-block;
            width: 100px;
            font-weight: bold;
        }
        
        .input-group input, .input-group select {
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 5px;
            width: 200px;
        }
        
        .btn {
            background: #2196f3;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px 5px;
        }
        
        .btn:hover {
            background: #1976d2;
        }
        
        .flight-results {
            display: none;
            padding: 20px;
        }
        
        .flight-card {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            transition: all 0.3s ease;
        }
        
        .best-deal {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            color: white;
            border: none;
        }
        
        .price-highlight {
            font-size: 1.5rem;
            font-weight: bold;
            color: #e74c3c;
        }
        
        .best-deal .price-highlight {
            color: white;
        }
        
        .update-time {
            text-align: center;
            color: #6c757d;
            font-size: 0.9rem;
            margin: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ” å¦é—¨é£åŒ—äº¬å•†åŠ¡èˆ±å®æ—¶æœç´¢</h1>
            <p>ä¸“ä¸šèˆªç­æ•°æ®èšåˆ - å¤šæºå®æ—¶æ¯”ä»·</p>
        </div>
        
        <div class="real-search-info">
            <h3>ğŸ“‹ çœŸå®æ•°æ®æœç´¢è¯´æ˜</h3>
            <p>ç”±äºéœ€è¦APIå¯†é’¥æ‰èƒ½è®¿é—®å®æ—¶èˆªç­æ•°æ®ï¼Œæˆ‘æä¾›äº†ä»¥ä¸‹å‡ ç§è·å–çœŸå®æ•°æ®çš„æ–¹æ³•ï¼š</p>
        </div>
        
        <div class="api-sources">
            <h3>ğŸ”Œ å¯ç”¨APIæ•°æ®æº</h3>
            <ul>
                <li><strong>Skyscanner API:</strong> å…è´¹å¥—é¤ï¼Œéœ€è¦æ³¨å†Œè·å–API Key</li>
                <li><strong>Amadeus API:</strong> æä¾›èˆªç­æœç´¢ï¼Œéœ€è¦å¼€å‘è€…è´¦å·</li>
                <li><strong>æºç¨‹å¼€æ”¾å¹³å°:</strong> éœ€è¦ä¼ä¸šè®¤è¯å’ŒAPIç”³è¯·</li>
                <li><strong>å»å“ªå„¿API:</strong> åˆä½œä¼™ä¼´è®¡åˆ’ï¼Œéœ€è¦å®¡æ ¸</li>
                <li><strong>é£å¸¸å‡†API:</strong> èˆªç­åŠ¨æ€æ•°æ®ï¼Œéœ€è¦ç”³è¯·</li>
            </ul>
        </div>
        
        <div class="manual-entry">
            <h3>âœˆï¸ æ‰‹åŠ¨è¾“å…¥å®æ—¶æ•°æ®</h3>
            <p>è¯·å¸®æˆ‘å¡«å…¥ä½ ä»ä»¥ä¸‹ç½‘ç«™æœç´¢åˆ°çš„çœŸå®æ•°æ®ï¼š</p>
            
            <div style="margin: 15px 0;">
                <strong>æ¨èæœç´¢ç½‘ç«™ï¼š</strong>
                <ul>
                    <li>ğŸ“± <a href="https://www.ctrip.com" target="_blank">æºç¨‹æ—…è¡Œç½‘</a></li>
                    <li>ğŸ“± <a href="https://flight.qunar.com" target="_blank">å»å“ªå„¿æœºç¥¨</a></li>
                    <li>ğŸ“± <a href="https://www.skyscanner.com" target="_blank">Skyscanner</a></li>
                    <li>ğŸ“± <a href="https://www.expedia.com" target="_blank">Expedia</a></li>
                </ul>
            </div>
            
            <div class="input-group">
                <label>æœç´¢æ—¥æœŸï¼š</label>
                <input type="date" id="searchDate" value="2026-02-06">
            </div>
            
            <div class="input-group">
                <label>èˆªçº¿ï¼š</label>
                <select id="route">
                    <option value="XMN-PEK">å¦é—¨é«˜å´ â†’ åŒ—äº¬é¦–éƒ½</option>
                    <option value="XMN-PKX">å¦é—¨é«˜å´ â†’ åŒ—äº¬å¤§å…´</option>
                </select>
            </div>
            
            <button class="btn" onclick="showDataEntry()">æ·»åŠ èˆªç­æ•°æ®</button>
            <button class="btn" onclick="loadSampleData()">åŠ è½½ç¤ºä¾‹å¯¹æ¯”æ•°æ®</button>
        </div>
        
        <div id="dataEntry" style="display: none; background: #f8f9fa; padding: 20px; margin: 20px; border-radius: 10px;">
            <h4>ğŸ“ æ·»åŠ èˆªç­ä¿¡æ¯</h4>
            <div class="input-group">
                <label>èˆªç©ºå…¬å¸ï¼š</label>
                <input type="text" id="airline" placeholder="å¦‚ï¼šä¸­å›½å›½é™…èˆªç©º">
            </div>
            <div class="input-group">
                <label>èˆªç­å·ï¼š</label>
                <input type="text" id="flightNumber" placeholder="å¦‚ï¼šCA9582">
            </div>
            <div class="input-group">
                <label>èµ·é£æ—¶é—´ï¼š</label>
                <input type="time" id="departureTime">
            </div>
            <div class="input-group">
                <label>åˆ°è¾¾æ—¶é—´ï¼š</label>
                <input type="time" id="arrivalTime">
            </div>
            <div class="input-group">
                <label>ä»·æ ¼(å…ƒ)ï¼š</label>
                <input type="number" id="price" placeholder="å¦‚ï¼š3280">
            </div>
            <button class="btn" onclick="addFlight()">æ·»åŠ èˆªç­</button>
            <button class="btn" onclick="hideDataEntry()">å–æ¶ˆ</button>
        </div>
        
        <div id="flightResults" class="flight-results">
            <h3>ğŸ›« æœç´¢ç»“æœ</h3>
            <div id="bestDeal"></div>
            <div id="otherFlights"></div>
            <div class="update-time">
                æ•°æ®æ›´æ–°æ—¶é—´ï¼š<span id="updateTime"></span>
            </div>
        </div>
    </div>
    
    <script>
        let flightData = [];
        
        function showDataEntry() {
            document.getElementById('dataEntry').style.display = 'block';
        }
        
        function hideDataEntry() {
            document.getElementById('dataEntry').style.display = 'none';
        }
        
        function addFlight() {
            const flight = {
                airline: document.getElementById('airline').value,
                flightNumber: document.getElementById('flightNumber').value,
                departureTime: document.getElementById('departureTime').value,
                arrivalTime: document.getElementById('arrivalTime').value,
                price: parseInt(document.getElementById('price').value),
                duration: calculateDuration(document.getElementById('departureTime').value, document.getElementById('arrivalTime').value)
            };
            
            flightData.push(flight);
            updateDisplay();
            hideDataEntry();
            clearForm();
        }
        
        function calculateDuration(depTime, arrTime) {
            const dep = new Date(`2000-01-01T${depTime}`);
            const arr = new Date(`2000-01-01T${arrTime}`);
            if (arr < dep) arr.setDate(arr.getDate() + 1);
            
            const diff = arr - dep;
            const hours = Math.floor(diff / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            
            return `${hours}å°æ—¶${minutes}åˆ†é’Ÿ`;
        }
        
        function clearForm() {
            document.getElementById('airline').value = '';
            document.getElementById('flightNumber').value = '';
            document.getElementById('departureTime').value = '';
            document.getElementById('arrivalTime').value = '';
            document.getElementById('price').value = '';
        }
        
        function loadSampleData() {
            flightData = [
                {
                    airline: "ä¸­å›½å›½é™…èˆªç©º",
                    flightNumber: "CA9582",
                    departureTime: "08:30",
                    arrivalTime: "11:15",
                    price: 3280,
                    duration: "2å°æ—¶45åˆ†é’Ÿ",
                    features: ["å…è´¹é€€æ”¹", "é‡Œç¨‹ç´¯ç§¯100%", "å…¨æœåŠ¡"]
                },
                {
                    airline: "å¦é—¨èˆªç©º",
                    flightNumber: "MF8101",
                    departureTime: "07:20",
                    arrivalTime: "10:10",
                    price: 3580,
                    duration: "2å°æ—¶50åˆ†é’Ÿ",
                    features: ["å¦èˆªç™½é¹­ä¼šå‘˜", "å…è´¹é¤é£Ÿ", "ä¼˜å…ˆç™»æœº"]
                },
                {
                    airline: "å—æ–¹èˆªç©º",
                    flightNumber: "CZ378",
                    departureTime: "09:45",
                    arrivalTime: "12:35",
                    price: 3450,
                    duration: "2å°æ—¶50åˆ†é’Ÿ",
                    features: ["å—èˆªæ˜ç ä¼šå‘˜", "å¤§å…´æœºåœº", "å…è´¹WiFi"]
                }
            ];
            
            updateDisplay();
        }
        
        function updateDisplay() {
            if (flightData.length === 0) return;
            
            // æŒ‰ä»·æ ¼æ’åº
            flightData.sort((a, b) => a.price - b.price);
            
            const bestDeal = flightData[0];
            const otherFlights = flightData.slice(1);
            
            // æ˜¾ç¤ºæœ€ä½³æ€§ä»·æ¯”
            document.getElementById('bestDeal').innerHTML = `
                <div class="flight-card best-deal">
                    <h3>ğŸ† æœ€ä½³æ€§ä»·æ¯”æ¨è</h3>
                    <h4>${bestDeal.airline} ${bestDeal.flightNumber}</h4>
                    <p><strong>æ—¶é—´ï¼š</strong> ${bestDeal.departureTime} â†’ ${bestDeal.arrivalTime} (${bestDeal.duration})</p>
                    <p><strong>ä»·æ ¼ï¼š</strong> <span class="price-highlight">Â¥${bestDeal.price.toLocaleString()}</span></p>
                    <p><strong>ç‰¹è‰²ï¼š</strong> ${bestDeal.features.join(' â€¢ ')}</p>
                </div>
            `;
            
            // æ˜¾ç¤ºå…¶ä»–èˆªç­
            let otherHtml = '<h4>å…¶ä»–å•†åŠ¡èˆ±é€‰æ‹©ï¼š</h4>';
            otherFlights.forEach(flight => {
                otherHtml += `
                    <div class="flight-card">
                        <h4>${flight.airline} ${flight.flightNumber}</h4>
                        <p><strong>æ—¶é—´ï¼š</strong> ${flight.departureTime} â†’ ${flight.arrivalTime} (${flight.duration})</p>
                        <p><strong>ä»·æ ¼ï¼š</strong> <span class="price-highlight">Â¥${flight.price.toLocaleString()}</span></p>
                        <p><strong>ç‰¹è‰²ï¼š</strong> ${flight.features.join(' â€¢ ')}</p>
                    </div>
                `;
            });
            
            document.getElementById('otherFlights').innerHTML = otherHtml;
            document.getElementById('flightResults').style.display = 'block';
            document.getElementById('updateTime').textContent = new Date().toLocaleString();
        }
        
        // è®¾ç½®é»˜è®¤æ—¥æœŸä¸ºæ˜å¤©
        document.getElementById('searchDate').value = new Date(Date.now() + 24*60*60*1000).toISOString().split('T')[0];
    </script>
</body>
</html>